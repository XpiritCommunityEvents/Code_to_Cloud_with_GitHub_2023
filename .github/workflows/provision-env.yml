name: Provision Participant environment

on:
  workflow_dispatch:
    inputs: 
      githubhandle: 
        required: true
        type: text
 
  
jobs:
  build:
    runs-on: ubuntu-latest  

    steps:
    - name: Checkout
      uses: actions/checkout@v3

#    - name: Install GH Collab
#      run: |
#        gh extension install mislav/gh-repo-collab
#      env:
#        GH_TOKEN: ${{ secrets.VSLIVE_REPOCREATE }}

 #   - name: Create Repository
 #     env:
 #       GH_TOKEN: ${{ secrets.VSLIVE_REPOCREATE }}
 #     run: |
 #       # Get the repository name from the input parameter
 #       gh repo create XpiritCommunityEvents/${{ github.event.inputs.githubhandle }} \
 #         --public \
 #         --template ${{ github.repository }}
          
  #  - name: Set Rights to Repo
  #    env:
  #      GH_TOKEN: ${{ secrets.VSLIVE_REPOCREATE }}
  #    run: |
  #      # Get the repository name from the input parameter
  #      gh repo-collab add XpiritCommunityEvents/${{ github.event.inputs.githubhandle }} ${{ github.event.inputs.githubhandle }} --permission admin | cat
    
    - name: Azure Login
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}
        
    - name: Azure CLI Action
      uses: Azure/cli@v1.0.8
      with:
        # Specify the script here
        inlineScript: |
          az group create -l eastus -n rg-${{ github.event.inputs.githubhandle }} --tags vslive2023
          
        

